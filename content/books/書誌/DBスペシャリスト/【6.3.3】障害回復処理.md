---
title: "【6.3.3】障害回復処理"
date: 2023-10-01T00:36:32+09:00
tags: [""]
seq: [""]
draft: false
---

### 内容
- ログ
  - 更新前ログ
  - 更新後ログ
- ログの利用方法
  - DBMSのデータベース利用
    - ハードディスクなどのデータが格納されている場所からメモリ上にデータを読み込む
    - データが書き換えられた時、データはメモリ上でのみ更新される
  - ハードディスク上のデータ更新
    - チェックポイントと呼ばれる
    - それ以前のデータはメモリに障害が発生すると失われる
      - ログ管理が必要
      - ログバッファを更新前ログ、更新後ログファイルを記憶装置に書き出す
        - 更新前ログからロールバック
        - 更新後ログからロールフォワード
- WALプロトコル
  - 更新前ログと更新後ログへの書き込みはデータの更新とともに行われる
    - 更新前レコードの書き出し
    - 実データの更新
    - 更新後レコードの書き出し
    - これらの3つをどのような順番で行うかは決まっていない
      - 実データの更新前にレコードの書き出しを行う形式をWALという
- 障害回復処理
  - トランザクション障害
    - トランザクションのSQLでROLLBACK命令を実行する
  - ソフトウェア障害
    - 更新前ログや更新後ログから、ロールバックやロールフォワードを実行する
  - ハードウェア障害
    - バックアップを用いて復元する
    - バックアップデータ移行のデータの復元を行うため、リストアに合わせてロールフォワードを実行する
- バックアップ
  - フルバックアップ
  - 増分バックアップ
    - 復旧に時間がかかる
  - 差分バックアップ
    - フルバックアップからの差分
      

---
### ツッコミ・考察
- 

---
### 疑問点
- 


---
### リンク
- 