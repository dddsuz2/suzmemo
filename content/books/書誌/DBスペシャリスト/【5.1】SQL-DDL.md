---
title: "【5.1】SQL DDL"
date: 2023-09-27T22:10:27+09:00
tags: [""]
seq: [""]
draft: false
---

### 内容
- CREATE
  - DB、テーブル、ビュー、インデックス、ストアドプロシージャが作成できる
- DROP
  - 作成したものを削除
- ALTER
  - 変更
- データベース定義
  - 最初はデータベースの定義
  - CREATE DATABASE
- テーブル（表）作成
  - CREATE TABLE
```SQL
CREATE TABLE tablename {
    列名 データ型 [列の制約]
    [, ...n]
    [テーブル全体の制約]
}
```
- データ型
- テーブルの制約
  - 前の制約参照
  - 参照制約時のオプション
    - NO ACTION
      - 外部キーが参照制約に違反した場合はエラーを生成
    - CASCADE
      - 参照する列と参照される値の列の値を連動させる
    - SET NULL
      - 対応行がなくなった参照列の値にNULLを設定する
    - SET DEFAULT
      - 対応行がなくなった参照列の値にあらかじめ設定されたデフォルト値を設定する
- ビュー
  - 仮想的なテーブル
  - 参照の旅、CREATE VIEW文で定義されたSELECT文の問い合わせを実行し、実テーブルからデータを取得する
- インデックス
  - テーブルに対して作成する、データを効率的に検索するための索引
```SQL
CREATE INDEX インデックス名 ON テーブル名 {
    列名 [, ...n]}
```
- カーソル
  - テーブルから1度に1行ずつレコードの検索と操作を行えるようにする仕組み
  - カーソルの操作
    - カーソルの宣言 (DECLARE)
    - カーソルを開く (OPEN)
    - カーソルからの行の取り出し (FETCH)
    - 終了した後、カーソルを閉じる (CLOSE)
  - FETCH
    - 取り出した行を更新するには、UPDATE 文を実行する
      - WHERE CURRENT OF CURSOR名
```SQL
DECLARE カーソル名　CURSOR FOR SELECT
  [FOR {READ ONLY | UPDATE [OF 列名 [, ...n]]}]
```

- ロール
  - 役割が同じユーザーをひとまとめにしたもの
- ドメイン定義
  - 制約をもったデータ型
- トリガー
  - テーブルのあるデータを更新した時に、別のデータを連動して更新するようにする設定
```SQL
CREATE TRIGGER <name> <動作時期> <トリガー事象>
  ON <表名> [ REFERENCING <遷移表>]
  <被トリガー動作>
```
  - トリガー動作時期
    - BEFORE
    - AFTER
  - トリガー事象
    - INSERT, DELETE, UPDATE

---
### ツッコミ・考察
- 

---
### 疑問点
- 


---
### リンク
- 