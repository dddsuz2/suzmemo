---
title: "【2.28.6】科学的メソッド"
date: 2023-08-21T15:07:23+09:00
tags: [""]
seq: [""]
draft: false
---

- 仮説を立て、それを検証する
  1. 問題
  2. 仮説
  3. 予測
  4. 検証
  5. 分析

- 問題はパフォーマンス障害の記述

```
例
問題：データベースクエリーが遅い原因は何か？
仮説：騒がしい隣人（クラウドの他のテナント）がディスクI/Oを実行しており、データベースとディスクI/Oを奪い合っている（ファイルシステムを介して）
予測：クエリーの過程でファイルシステムにおけるI/Oレイテンシが計測されるなら、クエリーの遅さの原因はファイルシステムにある
検証：クエリーレイテンシとの比率という形でデータベースファイルシステムレイテンシをトレースすると、ファイルシステム待ちでは5％未満の時間しか使っていないことがわかった
分析：このファイルシステムとディスクはクエリーの速度低下の原因ではない
```

```
例
問題：ホストＢからホストＣの時と比べ、ホストAからホストCにHTTP要求を送った時の方法が処理に時間がかかるのはなぜか
仮説：ホストAとBは別のデータセンターにある
予測：ホストAをホストBと同じデータセンターに移すと問題は解決する
検証：ホストAを移してパフォーマンスを計測する
分析：パフォーマンス障害は解決した。仮説に整合する
```

```
問題：ファイルシステムキャッシュのサイズを大きくしたらファイルシステムパフォーマンスが低下したのはなぜか
仮説：おおきなキャッシュは格納するレコードの数が多くなっており、小さなキャッシュよりも大きなキャッシュを管理するときの方が計算能力が必要になる
予測：レコードサイズを段階的に小さくしていき、同じ量のデータを格納するために使うレコードの数を増やすと、パフォーマンスが次第に低下する
検証：同じワークロードで段階的にレコードサイズを小さくして検証する
分析：結果をグラフにまとめると、予想と符合した結果になっている
```

- これはネガティブテストとよばれる